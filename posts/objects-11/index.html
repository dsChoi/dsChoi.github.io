<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<meta name="description" content="stones blog.">
<title>
    chapter-11. 합성과 유연한 설계 - my name is Stones
</title>


<link rel="shortcut icon" href="/sam.ico">








<link rel="stylesheet" href="/css/main.min.c5514d3530979d291f3497facc20da1cec870028dbc2a3630b64bab8721bbe49.css" integrity="sha256-xVFNNTCXnSkfNJf6zCDaHOyHACjbwqNjC2S6uHIbvkk=" crossorigin="anonymous" media="screen">




  






<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://example.com/tn.png"/>

<meta name="twitter:title" content="chapter-11. 합성과 유연한 설계"/>
<meta name="twitter:description" content="chapter 11. 합성과 유연한 설계&nbsp;¶  상속관계 : is - a 관계 합성관계 : has -a 관계  상속 : 구현은 간단하나 자식과 부모 클래스 사이의 결합도가 높아짐.
 클래스 사이의 정적인 관계  합성: 객체의 구현이 아닌 퍼블릭 인터페이스에 의존. 포함된 객체의 내부 구현이 변경되더라도 영향을 최소화 할 수 있다.
 객체 사이의 동적인 관계 변경하기 쉽고 유연한 설계를 얻을 수 있다.  코드 재사용을 위해서는  객체 합성이 클래스 상속보다 더 좋은 방법이다."/>

<meta property="og:title" content="chapter-11. 합성과 유연한 설계" />
<meta property="og:description" content="chapter 11. 합성과 유연한 설계&nbsp;¶  상속관계 : is - a 관계 합성관계 : has -a 관계  상속 : 구현은 간단하나 자식과 부모 클래스 사이의 결합도가 높아짐.
 클래스 사이의 정적인 관계  합성: 객체의 구현이 아닌 퍼블릭 인터페이스에 의존. 포함된 객체의 내부 구현이 변경되더라도 영향을 최소화 할 수 있다.
 객체 사이의 동적인 관계 변경하기 쉽고 유연한 설계를 얻을 수 있다.  코드 재사용을 위해서는  객체 합성이 클래스 상속보다 더 좋은 방법이다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/posts/objects-11/" />
<meta property="og:image" content="https://example.com/tn.png"/>
<meta property="article:published_time" content="2020-03-24T16:30:43+00:00" />
<meta property="article:modified_time" content="2020-03-24T16:30:43+00:00" /><meta property="og:site_name" content="my name is stones" />


    

    
    
    
    <title>
        
        chapter-11. 합성과 유연한 설계
        
    </title>
</head>

<body>
    
    
    <header class="wrap flex-container">
        <h1>chapter-11. 합성과 유연한 설계</h1>
    </header>
    
    <main class="wrap">
        
<div class="flex-container">
    <aside role="complementary">
        Tue Mar 24, 2020 &#183; 494 words
        <div class="tag-container">
            
            
            <span class="tag">
                <a href="/tags/objects/">
                    objects
                </a>
            </span>
            
            
        </div>
    </aside>
    <hr />
    <article role="article">
        
<h1 id="chapter-11-합성과-유연한-설계" class="anchor-link"><a href="#chapter-11-%ed%95%a9%ec%84%b1%ea%b3%bc-%ec%9c%a0%ec%97%b0%ed%95%9c-%ec%84%a4%ea%b3%84">chapter 11. 합성과 유연한 설계<span class="pilcrow">&nbsp;¶</span></a></h1>
<ul>
<li>상속관계 : is - a 관계</li>
<li>합성관계 : has -a 관계</li>
</ul>
<p>상속 : 구현은 간단하나 자식과 부모 클래스 사이의 결합도가 높아짐.</p>
<ul>
<li>클래스 사이의 정적인 관계</li>
</ul>
<p>합성: 객체의 구현이 아닌 퍼블릭 인터페이스에 의존. 포함된 객체의 내부 구현이 변경되더라도 영향을 최소화 할 수 있다.</p>
<ul>
<li>객체 사이의 동적인 관계</li>
<li>변경하기 쉽고 유연한 설계를 얻을 수 있다.</li>
</ul>
<p><code>코드 재사용을 위해서는 </code> 객체 합성이 클래스 상속보다 더 좋은 방법이다.</p>

<h2 id="01-상속을-합성으로-변경하기" class="anchor-link"><a href="#01-%ec%83%81%ec%86%8d%ec%9d%84-%ed%95%a9%ec%84%b1%ec%9c%bc%eb%a1%9c-%eb%b3%80%ea%b2%bd%ed%95%98%ea%b8%b0">01. 상속을 합성으로 변경하기<span class="pilcrow">&nbsp;¶</span></a></h2>
<p><strong>기존 10장 에서 보았던 코드에서 상속관계 제거 후 합성관계로 변경</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Properties</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">private</span> HashsTable<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> String<span style="color:#f92672">&gt;</span> properties <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashTable<span style="color:#f92672">&lt;&gt;</span> <span style="color:#f92672">();</span>
  
  <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span>String key<span style="color:#f92672">,</span> String value<span style="color:#f92672">){</span>
    <span style="color:#66d9ef">return</span> properties<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
  
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setProperty</span><span style="color:#f92672">(</span>String key<span style="color:#f92672">,</span> String value<span style="color:#f92672">){</span>
    properties<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>몽키 패치란 현재 실행중인 환경에만 영향을 미치도록 지역적으로 코드를 수정하거나 확장하는 것을 가리킨다.</p>
<p>자바는 언어 차원에서 몽키 패치를 지원하지 않기 때문에 바이트 코드를 직접 변환하거나 AOP를 이용해 몽키 패치를 구현하고 있다.</p>
</blockquote>

<h2 id="02-상속으로-인한-조합의-폭발적인-증가" class="anchor-link"><a href="#02-%ec%83%81%ec%86%8d%ec%9c%bc%eb%a1%9c-%ec%9d%b8%ed%95%9c-%ec%a1%b0%ed%95%a9%ec%9d%98-%ed%8f%ad%eb%b0%9c%ec%a0%81%ec%9d%b8-%ec%a6%9d%ea%b0%80">02. 상속으로 인한 조합의 폭발적인 증가<span class="pilcrow">&nbsp;¶</span></a></h2>
<p><strong>추상 메서드와 훅 메서드</strong></p>
<blockquote>
<p>개방-폐쇄 원칙을 만족하는 설계를 만들 수 있는 한 가지 방법은 부모 클래스에 새로운 추상 메서드를 추가하고 부모 클래스의 다른 메서드 안에서 호출하는 것이다. 자식 클래스는 추상 메서드를 오버라이딩하고 자신만의 로직을 구현해서 부모 클래스에서 정의한 플로우에 개입할 수 있게 된다. 처음에 phone 클래스에서 두 메서드를 오버라이딩한 것 역시 이 방식을 응용한 것이다.</p>
<p>추상메서드의 단점은 상속 계층에 속하는 모든 자식 클래스가 추상 메서드를 오버라이딩해야 한다는 것이다. 대부분의 자식 클래스가 추상 메서드를 동일한 방식으로 구현한다면 상속 계층 전반에 걸쳐 중복 코드가 존재하게 될 것이다. 해결 방법은 메서드에 기본 구현을 제공하는 것이다. 이처럼 추상 메서드와 동일하게 자식 클래스에서 오버라이딩 할 의도로 메서드를 추가했지만 편의를 위해 기본 구현을 제공하는 메서드를 훅 메서드 라고 부른다.</p>
</blockquote>
<p><p style="text-align:center;">
    <img src="objects-11/image-20200407212827263.png" alt="image-20200407212827263"  />
</p>
</p>
<p><strong>클래스 폭발 문제 또는 조합의 폭발 문제</strong></p>
<blockquote>
<p>상속의 남용으로 하나의 기능을 추가하기 위해 필요 이상으로 많은 수의 클래스를 추가해야하는 경우</p>
</blockquote>

<h2 id="03-합성-관계로-변경하기" class="anchor-link"><a href="#03-%ed%95%a9%ec%84%b1-%ea%b4%80%ea%b3%84%eb%a1%9c-%eb%b3%80%ea%b2%bd%ed%95%98%ea%b8%b0">03. 합성 관계로 변경하기<span class="pilcrow">&nbsp;¶</span></a></h2>
<p>상속 관계 : 컴파일타임에 결정되고 고정됨</p>
<ul>
<li>여러 기능을 조합해야하는 설계에 상속을 이용하면 위의 경우 처럼 케이스별로 클래스를 추가해야한다.</li>
</ul>
<p>합성 관계: 구현이 아닌 퍼블릭 인터페이스에 대해서만 의존하기에 런타임에 객체 관계를 변경할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Phone</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">private</span> RatePolicy ratePolicy<span style="color:#f92672">;</span>
  <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>Call<span style="color:#f92672">&gt;</span> calls <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
  
  <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Phone</span><span style="color:#f92672">(</span>RatePolicy ratePolicy<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">ratePolicy</span> <span style="color:#f92672">=</span> ratePolicy<span style="color:#f92672">;</span>
  <span style="color:#f92672">}</span>
  
  <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Call<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getCalls</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> Collections<span style="color:#f92672">.</span><span style="color:#a6e22e">unmodifiableList</span><span style="color:#f92672">(</span>calls<span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
  
  <span style="color:#66d9ef">public</span> Money <span style="color:#a6e22e">calculateFee</span><span style="color:#f92672">(){</span>
    <span style="color:#66d9ef">return</span> ratePolicy<span style="color:#f92672">.</span><span style="color:#a6e22e">caculateFee</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Phone 내부 RatePolicy 에 대한 참조자가 있다.</p>
<p>이것이 합성이다.</p>
<p><strong>합성 관계를 사용한 기분 정책의 전체적인 구조</strong></p>
<p><p style="text-align:center;">
    <img src="objects-11/image-20200407223448312.png" alt="image-20200407223448312"  />
</p>
</p>
<p><strong>기본 정책과 부가 정책 합성하기</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// 일반 요금제에 세금 정책을 조합할 경우
</span><span style="color:#75715e"></span>Phone phone <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Phone<span style="color:#f92672">(</span>
										<span style="color:#66d9ef">new</span> TaxablePolicy<span style="color:#f92672">(</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">05</span><span style="color:#f92672">),</span> 
  											<span style="color:#66d9ef">new</span> RegualarPolicy<span style="color:#f92672">(...));</span>

<span style="color:#75715e">// 일반 요금제에 기본 요금 할인 정책을 조합한 결과에 세금 정책을 조합할 경우
</span><span style="color:#75715e"></span>Phone phone <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Phone<span style="color:#f92672">(</span>
										<span style="color:#66d9ef">new</span> TaxablePolicy<span style="color:#f92672">(</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">05</span><span style="color:#f92672">),</span> 
  											<span style="color:#66d9ef">new</span> RateDiscountablePolicy<span style="color:#f92672">(</span>Money<span style="color:#f92672">.</span><span style="color:#a6e22e">wons</span><span style="color:#f92672">(</span>1000<span style="color:#f92672">),</span> 
  											<span style="color:#66d9ef">new</span> RegualarPolicy<span style="color:#f92672">(...));</span>

</code></pre></div><p><strong>객체 합성이 클래스 상속보다 더 좋은 방법이다.</strong></p>
<p>코드를 재사용 하면서 건전한 결합도를 유지할 수 있는 더 좋은 방법은 합성이다.</p>
<p>상속은 나쁜것인가? 사용해서는 안되는것인가?</p>
<p>상속의 종류</p>
<ul>
<li>구현상속</li>
<li>인터페이스 상속</li>
</ul>
<p>이번장에서 살펴본 상속에 대한 모든 단점은 <strong>구현상속</strong>에 국한한다.</p>
<p><strong>인터페이스 상속</strong> 은  <strong>13장</strong> 에서 살펴볼 예정이다.</p>

<h2 id="04-믹스인" class="anchor-link"><a href="#04-%eb%af%b9%ec%8a%a4%ec%9d%b8">04. 믹스인<span class="pilcrow">&nbsp;¶</span></a></h2>
<p>믹스인(mixin) 객체를 생성할 때 코드 일부를 클래스 안에 섞어 재사용하는 기법</p>
<ul>
<li>코드 재사용에 특화된 방법이면서도 상속과 같은 결합도 문제를 초래하지는 않는다.</li>
<li>코드를 다른 코드 안에 유연하게 섞어 넣을 수 있다면 믹스인이라고 부를수 있다.</li>
</ul>

    </article>
</div>


        
<nav role="navigation" class="flex-container bottom-menu">
    
<hr />
<p>


    
        <a href="/posts">back</a>
        
            &#183;
        
    

    
        
            <a href="/posts">posts</a>
        
    
    
        
            &#183; 
            <a href="/gallery">gallery</a>
        
            &#183; 
            <a href="/portfolio">portfolio</a>
        
            &#183; 
            <a href="/about">who is stones?</a>
        
    
    &#183; 
    <a href="/">
        main
    </a>

</p>
</nav>

    </main>
    
    <footer class="flex-container footer">
</footer>
    
    
</body>

</html>