<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<meta name="description" content="stones blog.">
<title>
    파이썬코딩의 기술 - my name is Stones
</title>


<link rel="shortcut icon" href="/sam.ico">








<link rel="stylesheet" href="/css/main.min.c5514d3530979d291f3497facc20da1cec870028dbc2a3630b64bab8721bbe49.css" integrity="sha256-xVFNNTCXnSkfNJf6zCDaHOyHACjbwqNjC2S6uHIbvkk=" crossorigin="anonymous" media="screen">




  






<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://example.com/tn.png"/>

<meta name="twitter:title" content="파이썬코딩의 기술"/>
<meta name="twitter:description" content="2 리스트와 딕셔너리 (better way 15 ~ 18)&nbsp;¶ Better way 15. 딕셔너리 삽입 순서에 의존할 떄는 조심하라&nbsp;¶ python 3.5 이전 버전에서는 딕셔너리 구현이 내장 hash 함수와 파이썬 인터프리터가 시작할 때 초기화되는 난수 씨앗값을 사용하는 해시 테이블 알고리즘으로 만들어졌기 때문에 입력 순서와 출력순서가 달라진다.
python 3.6 부터는 딕셔너리가 삽입 순서를 보존하도록 동작이 개선되었다.
baby_names = { &#39;cat&#39;: &#39;kitten&#39; , &#39;dog&#39;: &#39;puppy&#39; } print(baby_names) &gt;&gt;&gt; 3.5 {&#39;dog&#39;:&#39;puppy&#39; , &#39;cat&#39; : &#39;kitten&#39;} &gt;&gt; 3."/>

<meta property="og:title" content="파이썬코딩의 기술" />
<meta property="og:description" content="2 리스트와 딕셔너리 (better way 15 ~ 18)&nbsp;¶ Better way 15. 딕셔너리 삽입 순서에 의존할 떄는 조심하라&nbsp;¶ python 3.5 이전 버전에서는 딕셔너리 구현이 내장 hash 함수와 파이썬 인터프리터가 시작할 때 초기화되는 난수 씨앗값을 사용하는 해시 테이블 알고리즘으로 만들어졌기 때문에 입력 순서와 출력순서가 달라진다.
python 3.6 부터는 딕셔너리가 삽입 순서를 보존하도록 동작이 개선되었다.
baby_names = { &#39;cat&#39;: &#39;kitten&#39; , &#39;dog&#39;: &#39;puppy&#39; } print(baby_names) &gt;&gt;&gt; 3.5 {&#39;dog&#39;:&#39;puppy&#39; , &#39;cat&#39; : &#39;kitten&#39;} &gt;&gt; 3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/posts/effectivepython_04/" />
<meta property="og:image" content="https://example.com/tn.png"/>
<meta property="article:published_time" content="2021-02-08T17:21:08+09:00" />
<meta property="article:modified_time" content="2021-02-08T17:21:08+09:00" /><meta property="og:site_name" content="my name is stones" />


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-184252439-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    

    
    
    
    <title>
        
        파이썬코딩의 기술
        
    </title>
</head>

<body>
    
    
    <header class="wrap flex-container">
        <h1>파이썬코딩의 기술</h1>
    </header>
    
    <main class="wrap">
        
<div class="flex-container">
    <aside role="complementary">
        Mon Feb 08, 2021 &#183; 798 words
        <div class="tag-container">
            
            
            <span class="tag">
                <a href="/tags/python/">
                    python
                </a>
            </span>
            
            
            
            
            
            
        </div>
    </aside>
    <hr />
    <article role="article">
        
<h1 id="2-리스트와-딕셔너리-better-way-15--18" class="anchor-link"><a href="#2-%eb%a6%ac%ec%8a%a4%ed%8a%b8%ec%99%80-%eb%94%95%ec%85%94%eb%84%88%eb%a6%ac-better-way-15--18">2 리스트와 딕셔너리 (better way 15 ~ 18)<span class="pilcrow">&nbsp;¶</span></a></h1>

<h2 id="better-way-15-딕셔너리-삽입-순서에-의존할-떄는-조심하라" class="anchor-link"><a href="#better-way-15-%eb%94%95%ec%85%94%eb%84%88%eb%a6%ac-%ec%82%bd%ec%9e%85-%ec%88%9c%ec%84%9c%ec%97%90-%ec%9d%98%ec%a1%b4%ed%95%a0-%eb%96%84%eb%8a%94-%ec%a1%b0%ec%8b%ac%ed%95%98%eb%9d%bc">Better way 15. 딕셔너리 삽입 순서에 의존할 떄는 조심하라<span class="pilcrow">&nbsp;¶</span></a></h2>
<p>python 3.5 이전 버전에서는 딕셔너리 구현이 내장 hash 함수와 파이썬 인터프리터가 시작할 때 초기화되는 난수 씨앗값을 사용하는 해시 테이블 알고리즘으로 만들어졌기 때문에 입력 순서와 출력순서가 달라진다.</p>
<p>python 3.6 부터는 딕셔너리가 삽입 순서를 보존하도록 동작이 개선되었다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">baby_names <span style="color:#f92672">=</span> {
	<span style="color:#e6db74">&#39;cat&#39;</span>: <span style="color:#e6db74">&#39;kitten&#39;</span> , 
	<span style="color:#e6db74">&#39;dog&#39;</span>: <span style="color:#e6db74">&#39;puppy&#39;</span>
}
<span style="color:#66d9ef">print</span>(baby_names)

<span style="color:#f92672">&gt;&gt;&gt;</span>  <span style="color:#ae81ff">3.5</span> 
{<span style="color:#e6db74">&#39;dog&#39;</span>:<span style="color:#e6db74">&#39;puppy&#39;</span> , <span style="color:#e6db74">&#39;cat&#39;</span> : <span style="color:#e6db74">&#39;kitten&#39;</span>}

<span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">3.6</span>
{<span style="color:#e6db74">&#39;cat&#39;</span> : <span style="color:#e6db74">&#39;kitten&#39;</span> , <span style="color:#e6db74">&#39;dog&#39;</span> :<span style="color:#e6db74">&#39;puppy&#39;</span>}
</code></pre></div><blockquote>
<p><strong>기억해야 할 내용</strong></p>
<ul>
<li>파이썬 3.7 부터 dic 인스턴스에 들어 있는 내용을 이터레이션할 때  키를 삽입한 순서대로 돌려받는다는 사실에 의존할 수 있다.</li>
<li>파이썬은 dict 는 아니지만 딕셔너리와 비슷한 객체를 쉽게 만들 수 있게 해준다. 이런 타입의 경우 키 삽입 순서가 그대로 보존된다고 가정할 수 없다.</li>
<li>딕셔너리와 비슷한 클래스를 조심스럽게 다루는 방법으로는 dict 인스턴스의 삽입 순서보존에 의존하지 않고 코드를 작성하는 방법, 실행 시점에 명시적으로 dict 타입을 검사하는 방법, 타입 애너테이션과 정적 분석(static analysis) 을 사용해 dict 값을 요구하는 방법이 있다.</li>
</ul>
</blockquote>

<h2 id="better-way-16-in-을-사용하고-딕셔너리-키가-없을-때-keyerror-를-처리하기보다는-get을-사용하라" class="anchor-link"><a href="#better-way-16-in-%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b3%a0-%eb%94%95%ec%85%94%eb%84%88%eb%a6%ac-%ed%82%a4%ea%b0%80-%ec%97%86%ec%9d%84-%eb%95%8c-keyerror-%eb%a5%bc-%ec%b2%98%eb%a6%ac%ed%95%98%ea%b8%b0%eb%b3%b4%eb%8b%a4%eb%8a%94-get%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc">Better way 16. in 을 사용하고 딕셔너리 키가 없을 때 KeyError 를 처리하기보다는 get을 사용하라<span class="pilcrow">&nbsp;¶</span></a></h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">if</span> key <span style="color:#f92672">in</span> counters:
    count  <span style="color:#f92672">=</span> counters[key]
<span style="color:#66d9ef">else</span> : 
    count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
 
counters[key] <span style="color:#f92672">=</span> count <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>

<span style="color:#66d9ef">try</span>:
    count <span style="color:#f92672">=</span> coutners[key]
<span style="color:#66d9ef">except</span> keyError:
    count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>

counters[key] <span style="color:#f92672">=</span> count <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>

<span style="color:#f92672">//</span> <span style="color:#960050;background-color:#1e0010">아래처럼</span> get default <span style="color:#960050;background-color:#1e0010">형식이</span> <span style="color:#960050;background-color:#1e0010">코드가</span> <span style="color:#960050;background-color:#1e0010">간결하고</span> <span style="color:#960050;background-color:#1e0010">좋다</span><span style="color:#f92672">.</span>

count <span style="color:#f92672">=</span> counters<span style="color:#f92672">.</span>get(key, <span style="color:#ae81ff">0</span>)
counters[key] <span style="color:#f92672">=</span> count <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>


</code></pre></div><blockquote>
<p><strong>기억해야 할 내용</strong></p>
<ul>
<li>딕셔너리 키가 없는 경우를 처리하는 방법으로는 in 식을 사용하는 방법, KeyError 예외를 사용하는 방법, get 메서드를 사용하는 방법, setdefault 메서드를 사용하는 방법이 있다.</li>
<li>카운터와 같이 기본적인 타입의 값이 들어가는 딕셔너리를 다룰 때는 get 메서드가 가장 좋고, 딕셔너리에 넣을 값을 만든느 비용이 비싸거나 만드는 과정에 예외가 발생할 수 있는 경우에도 get 메서드를 사용하는 편이 낫다.</li>
<li>해결하려는 문제에 dict 의 setdefault 메서드를 사용하는 방법이 가장 적합해 보인다면 setdefault 대신 defaultdict  를 사용할지 고려해보라.</li>
</ul>
</blockquote>

<h2 id="better-way-17-내부-상태에서-원소가-없는-경우를-처리할-때는-setdefault-보다-defaultdic-를-사용하라" class="anchor-link"><a href="#better-way-17-%eb%82%b4%eb%b6%80-%ec%83%81%ed%83%9c%ec%97%90%ec%84%9c-%ec%9b%90%ec%86%8c%ea%b0%80-%ec%97%86%eb%8a%94-%ea%b2%bd%ec%9a%b0%eb%a5%bc-%ec%b2%98%eb%a6%ac%ed%95%a0-%eb%95%8c%eb%8a%94-setdefault-%eb%b3%b4%eb%8b%a4-defaultdic-%eb%a5%bc-%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc">Better way 17. 내부 상태에서 원소가 없는 경우를 처리할 때는 setdefault 보다 defaultdic 를 사용하라.<span class="pilcrow">&nbsp;¶</span></a></h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">visits <span style="color:#f92672">=</span> {
	<span style="color:#e6db74">&#39;미국&#39;</span> : {<span style="color:#e6db74">&#39;뉴욕&#39;</span>, <span style="color:#e6db74">&#39;로스엔젤레스&#39;</span>}, 
	<span style="color:#e6db74">&#39;일본&#39;</span> : {<span style="color:#e6db74">&#39;하코네&#39;</span>}
}



<span style="color:#f92672">//</span><span style="color:#960050;background-color:#1e0010">짧게</span> <span style="color:#960050;background-color:#1e0010">사용</span> <span style="color:#960050;background-color:#1e0010">가능</span>
visits<span style="color:#f92672">.</span>setdefault(<span style="color:#e6db74">&#39;프랑스&#39;</span>, set())<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#39;칸&#39;</span>)

<span style="color:#f92672">//</span><span style="color:#960050;background-color:#1e0010">이전</span> <span style="color:#960050;background-color:#1e0010">방법</span>

<span style="color:#66d9ef">if</span> (japan :<span style="color:#f92672">=</span> visits<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;일본&#39;</span>)) <span style="color:#f92672">is</span> None:
    visits[<span style="color:#e6db74">&#39;일본&#39;</span>] <span style="color:#f92672">=</span> japan <span style="color:#f92672">=</span> set()

jpan<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#39;교토&#39;</span>)

<span style="color:#66d9ef">print</span> <span style="color:#f92672">&gt;&gt;</span>
{<span style="color:#e6db74">&#39;미국&#39;</span> : {<span style="color:#e6db74">&#39;뉴욕&#39;</span>, <span style="color:#e6db74">&#39;로스엔젤레스&#39;</span>}, <span style="color:#e6db74">&#39;일본&#39;</span> : {<span style="color:#e6db74">&#39;하코네&#39;</span>} , <span style="color:#e6db74">&#39;프랑스&#39;</span> : {<span style="color:#e6db74">&#39;칸&#39;</span>}}


</code></pre></div><p><strong>직접 딕셔너리 생성을 제어하기</strong></p>
<p>setdefault 호출의 복잡도를 감춰주며, 프로그래머에거 더 나은 인터페이스를 제공한다</p>
<p>단점은 호출할때마다 set() 인스턴스를 만들기 때문에 효율적이지 않고 setdefault 라는 메서드 이름은 코드를 처음 읽는 사람은 코드 동작이해가 어렵기 때문이다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Visits</span>: 
    <span style="color:#66d9ef">def</span> __init__(self):
        self<span style="color:#f92672">.</span>data <span style="color:#f92672">=</span> {}
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(self, country, city):
        city_set <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>data<span style="color:#f92672">.</span>setdefault(country, set())
        city_set<span style="color:#f92672">.</span>add(city)
        
       
visits <span style="color:#f92672">=</span> Vists()
visits<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#39;러시아&#39;</span>, <span style="color:#e6db74">&#39;예카테린부르크&#39;</span>)
visits<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#39;탄자니아&#39;</span>, <span style="color:#e6db74">&#39;잔지바르&#39;</span>)
<span style="color:#66d9ef">print</span>(visits<span style="color:#f92672">.</span>data)

<span style="color:#f92672">&gt;&gt;</span>
{<span style="color:#e6db74">&#39;러시아&#39;</span> : {<span style="color:#e6db74">&#39;예카테린부르크&#39;</span>}, <span style="color:#e6db74">&#39;탄자니아&#39;</span>:{<span style="color:#e6db74">&#39;잔지바르&#39;</span>}}


</code></pre></div><p><strong>collections 의 defaultdict 을 사용하기</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> defaultdict

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Vists</span>:
    <span style="color:#66d9ef">def</span> __init__(self)
    	self<span style="color:#f92672">.</span>data <span style="color:#f92672">=</span> defaultdict(set)
        
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(self, country, city)
    	self<span style="color:#f92672">.</span>data[country]<span style="color:#f92672">.</span>add(city)

visits <span style="color:#f92672">=</span> Vists()
visits<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#39;영국&#39;</span>, <span style="color:#e6db74">&#39;바스&#39;</span>)
visits<span style="color:#f92672">.</span>add(<span style="color:#e6db74">&#39;영국&#39;</span>, <span style="color:#e6db74">&#39;런던&#39;</span>)
<span style="color:#66d9ef">print</span>(visits<span style="color:#f92672">.</span>data)
        
 <span style="color:#f92672">&gt;&gt;</span>
defaultdict(<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">set</span><span style="color:#e6db74">&#39;&gt;, {&#39;</span><span style="color:#960050;background-color:#1e0010">영국</span><span style="color:#e6db74">&#39; : {&#39;</span><span style="color:#960050;background-color:#1e0010">바스</span><span style="color:#e6db74">&#39;, &#39;</span><span style="color:#960050;background-color:#1e0010">런던</span><span style="color:#e6db74">&#39;}}</span>
  
</code></pre></div><blockquote>
<p><strong>기억해야 할 내용</strong></p>
<ul>
<li>키로 어떤 값이 들어올지 모르는 딕셔너리를 관리해야 하는데 collections 내장 모듈에 있는 defaultdict 인스턴스가 여러분의 필요에 맞아떨어진다면 defaultdict 를 사용하라.</li>
<li>임의의 키가 들어 있는 딕셔너리가 여러분에게 전달됐고 그 딕셔너리가 어떻게 생성됐는지 모르는 경우, 딕셔너리의 원소에 접근하려면 우선 get을 사용해야 한다. 하지만 setdefault 가 더 짧은 코드를 만들어내는 몇가지 경우에는 setdefault 를 사용하는것도 고려해볼 만하다.</li>
</ul>
</blockquote>

<h2 id="better-way-18-__missing__-을-사용해-키에-따라-다른-디폴트-값을-생성하는-방법을-알아두라" class="anchor-link"><a href="#better-way-18-__missing__-%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%b4-%ed%82%a4%ec%97%90-%eb%94%b0%eb%9d%bc-%eb%8b%a4%eb%a5%b8-%eb%94%94%ed%8f%b4%ed%8a%b8-%ea%b0%92%ec%9d%84-%ec%83%9d%ec%84%b1%ed%95%98%eb%8a%94-%eb%b0%a9%eb%b2%95%ec%9d%84-%ec%95%8c%ec%95%84%eb%91%90%eb%9d%bc">Better way 18. <code>__missing__</code> 을 사용해 키에 따라 다른 디폴트 값을 생성하는 방법을 알아두라.<span class="pilcrow">&nbsp;¶</span></a></h2>
<p>setdefault 와 defaultdict 모두 사용하기 어려운 경우</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pictures <span style="color:#f92672">=</span> {}
path <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;profile_1234.png&#39;</span>

<span style="color:#66d9ef">if</span> (handle :<span style="color:#f92672">=</span> pictures<span style="color:#f92672">.</span>get(path)) <span style="color:#f92672">is</span> None:
    <span style="color:#66d9ef">try</span>: 
        handle <span style="color:#f92672">=</span> open(path, <span style="color:#e6db74">&#39;a+b&#39;</span>)
    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">OSError</span>:
        <span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;경로를 열수 없습니다: {path}&#39;</span>)
        <span style="color:#66d9ef">raise</span>
    <span style="color:#66d9ef">else</span>:
        pictures[path] <span style="color:#f92672">=</span> handle
        
handle<span style="color:#f92672">.</span>seek(<span style="color:#ae81ff">0</span>)
image_data <span style="color:#f92672">=</span> handle<span style="color:#f92672">.</span>read()
        
</code></pre></div><p>이 코드는 문제가 많다.</p>
<p>파일 핸들을 만드는 내장 함수인 open 이 딕셔너리에 경로가 있는지 여부와 관계없이 항상 호출된다.  이로 인해 같은 프로그램상에 존재하던 열린 파일 핸들과 혼동될 수 잇는 새로운 파일 핸들이 생길수도 있다. open 이 예외를 던질 수 있으므로 이 예외를 처리해야한다. 하지만 이 예외를 같은 줄에 있는 setdefault 가 던지는 예외와 구분하지 못할 수도 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">try</span>:
    handle <span style="color:#f92672">=</span> picture<span style="color:#f92672">.</span>setdefault(path, open(path, <span style="color:#e6db74">&#39;a+b&#39;</span>))
<span style="color:#66d9ef">except</span> <span style="color:#a6e22e">OSError</span>:
    <span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;경로를 열수 없습니다: {path}&#39;</span>)
    <span style="color:#66d9ef">raise</span>
<span style="color:#66d9ef">else</span>:
	handle<span style="color:#f92672">.</span>seek(<span style="color:#ae81ff">0</span>)
	image_data <span style="color:#f92672">=</span> handle<span style="color:#f92672">.</span>read()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> defaultdict

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">open_picture</span>(profile_path):
    <span style="color:#66d9ef">try</span>:
        <span style="color:#66d9ef">return</span> open(profile_path, <span style="color:#e6db74">&#39;a+b&#39;</span>)
    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">OSError</span>:
        <span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#39;경로를 열수 없습니다: {profile_path}&#39;</span>)
	    <span style="color:#66d9ef">raise</span>
        
        
pictures <span style="color:#f92672">=</span> defaultidc(open_picture)
handle <span style="color:#f92672">=</span> pictures[path]
handle<span style="color:#f92672">.</span>seek(<span style="color:#ae81ff">0</span>)
image_data <span style="color:#f92672">=</span> handle<span style="color:#f92672">.</span>read()

<span style="color:#f92672">&gt;&gt;&gt;</span>
Traceback<span style="color:#f92672">...</span>
<span style="color:#a6e22e">TypeError</span> : open(picture() missing <span style="color:#ae81ff">1</span> required positional
argument : <span style="color:#e6db74">&#39;profile_path&#39;</span>
                 

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Pictures</span>(dict):
    <span style="color:#66d9ef">def</span> __missing__(self, key)
    	value <span style="color:#f92672">=</span> open_picture(key)
        self[key]  <span style="color:#f92672">=</span> value
        <span style="color:#66d9ef">return</span> value
    
pictures <span style="color:#f92672">=</span> Pictures()
handle <span style="color:#f92672">=</span> pictures[path]
handle<span style="color:#f92672">.</span>seek(<span style="color:#ae81ff">0</span>)
image_data <span style="color:#f92672">=</span> handle<span style="color:#f92672">.</span>read()



</code></pre></div><p>pictures[path] 라는 딕셔너리 접근에서 path 가 딕셔너리에 없으면 <code>__missing__</code> 메서드가 호출된다.  이 메서드는 키에 해당하는 디폴트 값을 생성해 딕셔너리에 넣어준 다음에 호출한 쪽에 그 값을 반환해야 한다. 그 후 딕셔너리에서 같은 경로에 접근하면 이미 해당 원소가 딕셔너리에 들어 있으므로 <code>__missing__</code>  이 호출되지 않든다.</p>
<blockquote>
<p><strong>기억해야 할 내용</strong></p>
<ul>
<li>디폴트 값을 만드는 계싼 비용이 높거나 만드는 과정에서 예외가 발생할 수 있는 상황에서는 dict 의 setdefault 메서드를 사용하지 말라.</li>
<li>defaultdict 에 전달되는 함수는 인자를 받지 않는다. 따라서 접근에 사용한 키 값에 맞는 디폴트 값을 생성하는 것은 불가능하다.</li>
<li>디폴트 키를 만들 때 어떤 키를 사용했는지 반드시 알아야 하는 상황이라면 직접 dict 의 하위 클래스와 <code>__missing__</code> 메서드를 정의하면 된다.</li>
</ul>
</blockquote>

    </article>
</div>
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dschoi-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        
<nav role="navigation" class="flex-container bottom-menu">
    
<hr />
<p>


    
        <a href="/posts">back</a>
        
            &#183;
        
    

    
        
            <a href="/posts">posts</a>
        
    
    
        
            &#183; 
            <a href="/gallery">gallery</a>
        
            &#183; 
            <a href="/portfolio">portfolio</a>
        
            &#183; 
            <a href="/about">who is stones?</a>
        
    
    &#183; 
    <a href="/">
        main
    </a>

</p>
</nav>

    </main>
    
    <footer class="flex-container footer">
</footer>
    
    
</body>

</html>