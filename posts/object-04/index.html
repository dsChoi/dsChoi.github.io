<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<meta name="description" content="stones blog.">
<title>
    chapter 04. 설계 품질과 트레이드오프 - my name is Stones
</title>


<link rel="shortcut icon" href="/sam.ico">








<link rel="stylesheet" href="/css/main.min.c5514d3530979d291f3497facc20da1cec870028dbc2a3630b64bab8721bbe49.css" integrity="sha256-xVFNNTCXnSkfNJf6zCDaHOyHACjbwqNjC2S6uHIbvkk=" crossorigin="anonymous" media="screen">




  






<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://example.com/tn.png"/>

<meta name="twitter:title" content="chapter 04. 설계 품질과 트레이드오프"/>
<meta name="twitter:description" content="chapter 04. 설계 품질과 트레이드오프&nbsp;¶  객체지향 설계란 올바른 객체에게 올바른 책임을 할당하면서 낮은 결합도와 높은 응집도를 가진 구조를 창조하는 활동이다.
  객체지향 설계의 핵심은 책임 책임을 할당하는 작업이 응집도와 결합도 같은 설계 품질과 깊이 연계되어있다.  01 . 데이터 중심의 영화 예매 시스템&nbsp;¶ 객체지향 설계의 시스템을 객체로 분할하는 두가지 방법
 상태를 분할의 중심축으로 책임을 분할의 중심축으로  상태 =데이터
데이터를 준비하자&nbsp;¶ public class Movie { private String title; private Duration runningTime; private Money fee; private List&lt;DiscountCondition&gt; discountConditions; private MovieType movieType; private Money discountAmount; private double discountPercent; } public enum MovieType { AMOUNT_DISCOUNT, //금액 할인 정책  PERCENT_DISCOUNT, //비율 할인 정책  NONE_DISCOUNT // 미적용 } 객체지향의 가장 중요한 원칙인 캡슐화를 위해 Movie 클래스에 **접근자(accessor)**와 **수정자(mutator)**를 추가."/>

<meta property="og:title" content="chapter 04. 설계 품질과 트레이드오프" />
<meta property="og:description" content="chapter 04. 설계 품질과 트레이드오프&nbsp;¶  객체지향 설계란 올바른 객체에게 올바른 책임을 할당하면서 낮은 결합도와 높은 응집도를 가진 구조를 창조하는 활동이다.
  객체지향 설계의 핵심은 책임 책임을 할당하는 작업이 응집도와 결합도 같은 설계 품질과 깊이 연계되어있다.  01 . 데이터 중심의 영화 예매 시스템&nbsp;¶ 객체지향 설계의 시스템을 객체로 분할하는 두가지 방법
 상태를 분할의 중심축으로 책임을 분할의 중심축으로  상태 =데이터
데이터를 준비하자&nbsp;¶ public class Movie { private String title; private Duration runningTime; private Money fee; private List&lt;DiscountCondition&gt; discountConditions; private MovieType movieType; private Money discountAmount; private double discountPercent; } public enum MovieType { AMOUNT_DISCOUNT, //금액 할인 정책  PERCENT_DISCOUNT, //비율 할인 정책  NONE_DISCOUNT // 미적용 } 객체지향의 가장 중요한 원칙인 캡슐화를 위해 Movie 클래스에 **접근자(accessor)**와 **수정자(mutator)**를 추가." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/posts/object-04/" />
<meta property="og:image" content="https://example.com/tn.png"/>
<meta property="article:published_time" content="2020-02-10T01:05:07+00:00" />
<meta property="article:modified_time" content="2020-02-10T01:05:07+00:00" /><meta property="og:site_name" content="my name is stones" />


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-XR2Y95VWMZ', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    

    
    
    
    <title>
        
        chapter 04. 설계 품질과 트레이드오프
        
    </title>
</head>

<body>
    
    
    <header class="wrap flex-container">
        <h1>chapter 04. 설계 품질과 트레이드오프</h1>
    </header>
    
    <main class="wrap">
        
<div class="flex-container">
    <aside role="complementary">
        Mon Feb 10, 2020 &#183; 1228 words
        <div class="tag-container">
            
            
            <span class="tag">
                <a href="/tags/objects/">
                    objects
                </a>
            </span>
            
            
            
            <span class="tag">
                <a href="/tags/object/">
                    object
                </a>
            </span>
            
            
        </div>
    </aside>
    <hr />
    <article role="article">
        
<h1 id="chapter-04-설계-품질과-트레이드오프" class="anchor-link"><a href="#chapter-04-%ec%84%a4%ea%b3%84-%ed%92%88%ec%a7%88%ea%b3%bc-%ed%8a%b8%eb%a0%88%ec%9d%b4%eb%93%9c%ec%98%a4%ed%94%84">chapter 04. 설계 품질과 트레이드오프<span class="pilcrow">&nbsp;¶</span></a></h1>
<blockquote>
<p>객체지향 설계란 올바른 객체에게 올바른 책임을 할당하면서 낮은 결합도와 높은 응집도를 가진 구조를 창조하는 활동이다.</p>
</blockquote>
<ol>
<li>객체지향 설계의 핵심은 책임</li>
<li>책임을 할당하는 작업이 응집도와 결합도 같은 설계 품질과 깊이 연계되어있다.</li>
</ol>

<h2 id="01--데이터-중심의-영화-예매-시스템" class="anchor-link"><a href="#01--%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a4%91%ec%8b%ac%ec%9d%98-%ec%98%81%ed%99%94-%ec%98%88%eb%a7%a4-%ec%8b%9c%ec%8a%a4%ed%85%9c">01 . 데이터 중심의 영화 예매 시스템<span class="pilcrow">&nbsp;¶</span></a></h2>
<p><strong>객체지향 설계의 시스템을 객체로 분할하는 두가지 방법</strong></p>
<ol>
<li>상태를 분할의 중심축으로</li>
<li>책임을 분할의 중심축으로</li>
</ol>
<p><code>상태</code> =<code>데이터</code></p>

<h3 id="데이터를-준비하자" class="anchor-link"><a href="#%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%a4%80%eb%b9%84%ed%95%98%ec%9e%90">데이터를 준비하자<span class="pilcrow">&nbsp;¶</span></a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Movie</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> String title<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Duration runningTime<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Money fee<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>DiscountCondition<span style="color:#f92672">&gt;</span> discountConditions<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">private</span> MovieType movieType<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Money discountAmount<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> discountPercent<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>


<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> MovieType <span style="color:#f92672">{</span>
    AMOUNT_DISCOUNT<span style="color:#f92672">,</span> <span style="color:#75715e">//금액 할인 정책
</span><span style="color:#75715e"></span>    PERCENT_DISCOUNT<span style="color:#f92672">,</span> <span style="color:#75715e">//비율 할인 정책
</span><span style="color:#75715e"></span>    NONE_DISCOUNT <span style="color:#75715e">// 미적용
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>


</code></pre></div><p>객체지향의 가장 중요한 원칙인 캡슐화를 위해 Movie 클래스에  **접근자(accessor)**와 **수정자(mutator)**를 추가.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"> <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getTitle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> title<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setTitle</span><span style="color:#f92672">(</span>String title<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> title<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Duration <span style="color:#a6e22e">getRunningTime</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> runningTime<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setRunningTime</span><span style="color:#f92672">(</span>Duration runningTime<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">runningTime</span> <span style="color:#f92672">=</span> runningTime<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Money <span style="color:#a6e22e">getFee</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> fee<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
</code></pre></div><p>소스코드는 아래 링크에 추가해놓았으니 확인 바랍니다.</p>
<p><a href="https://github.com/dsChoi/study/tree/master/src/main/java/com/setin/study/objects/chapter04">https://github.com/dsChoi/study/tree/master/src/main/java/com/setin/study/objects/chapter04</a></p>
<p><strong>영화 예매 시스템 구현을 위한 데이터 클래스</strong></p>
<p><!-- raw HTML omitted --></p>

<h3 id="영화를-예매하자" class="anchor-link"><a href="#%ec%98%81%ed%99%94%eb%a5%bc-%ec%98%88%eb%a7%a4%ed%95%98%ec%9e%90">영화를 예매하자<span class="pilcrow">&nbsp;¶</span></a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReservationAgency</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> Reservation <span style="color:#a6e22e">reserve</span><span style="color:#f92672">(</span>Screening screening<span style="color:#f92672">,</span> Customer customer<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> audienceCount<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Movie movie <span style="color:#f92672">=</span> screening<span style="color:#f92672">.</span><span style="color:#a6e22e">getMovie</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">boolean</span> discountable <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>


        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>DiscountCondition condition <span style="color:#f92672">:</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">getDiscountConditions</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>condition<span style="color:#f92672">.</span><span style="color:#a6e22e">getType</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> DiscountConditionType<span style="color:#f92672">.</span><span style="color:#a6e22e">PERIOD</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                discountable <span style="color:#f92672">=</span> screening<span style="color:#f92672">.</span><span style="color:#a6e22e">getWhenScreened</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getDayOfWeek</span><span style="color:#f92672">().</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>condition<span style="color:#f92672">.</span><span style="color:#a6e22e">getDayOfWeek</span><span style="color:#f92672">())</span>
                        <span style="color:#f92672">&amp;&amp;</span> condition<span style="color:#f92672">.</span><span style="color:#a6e22e">getStartTime</span><span style="color:#f92672">().</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>screening<span style="color:#f92672">.</span><span style="color:#a6e22e">getWhenScreened</span><span style="color:#f92672">().</span><span style="color:#a6e22e">toLocalTime</span><span style="color:#f92672">())</span> <span style="color:#f92672">&lt;=</span> 0
                        <span style="color:#f92672">&amp;&amp;</span> condition<span style="color:#f92672">.</span><span style="color:#a6e22e">getEndTime</span><span style="color:#f92672">().</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>screening<span style="color:#f92672">.</span><span style="color:#a6e22e">getWhenScreened</span><span style="color:#f92672">().</span><span style="color:#a6e22e">toLocalTime</span><span style="color:#f92672">())</span> <span style="color:#f92672">&lt;=</span> 0<span style="color:#f92672">;</span>

            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                discountable <span style="color:#f92672">=</span> condition<span style="color:#f92672">.</span><span style="color:#a6e22e">getSequence</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> screening<span style="color:#f92672">.</span><span style="color:#a6e22e">getSequence</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>

            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>discountable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>

        Money fee<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>discountable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            Money discountAmount <span style="color:#f92672">=</span> Money<span style="color:#f92672">.</span><span style="color:#a6e22e">ZERO</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>movie<span style="color:#f92672">.</span><span style="color:#a6e22e">getMovieType</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">case</span> AMOUNT_DISCOUNT<span style="color:#f92672">:</span>
                    discountAmount <span style="color:#f92672">=</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">getDiscountAmount</span><span style="color:#f92672">();</span>
                    <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">case</span> PERCENT_DISCOUNT<span style="color:#f92672">:</span>
                    discountAmount <span style="color:#f92672">=</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">getFee</span><span style="color:#f92672">().</span><span style="color:#a6e22e">times</span><span style="color:#f92672">(</span>movie<span style="color:#f92672">.</span><span style="color:#a6e22e">getDiscountPercent</span><span style="color:#f92672">());</span>
                    <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>

                <span style="color:#66d9ef">case</span> NONE_DISCOUNT<span style="color:#f92672">:</span>
                    discountAmount <span style="color:#f92672">=</span> Money<span style="color:#f92672">.</span><span style="color:#a6e22e">ZERO</span><span style="color:#f92672">;</span>
                    <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            fee <span style="color:#f92672">=</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">getFee</span><span style="color:#f92672">().</span><span style="color:#a6e22e">minus</span><span style="color:#f92672">(</span>discountAmount<span style="color:#f92672">).</span><span style="color:#a6e22e">times</span><span style="color:#f92672">(</span>audienceCount<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            fee <span style="color:#f92672">=</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">getFee</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Reservation<span style="color:#f92672">(</span>customer<span style="color:#f92672">,</span> screening<span style="color:#f92672">,</span> fee<span style="color:#f92672">,</span> audienceCount<span style="color:#f92672">);</span>

    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div>
<h2 id="02-설계-트레이드오프" class="anchor-link"><a href="#02-%ec%84%a4%ea%b3%84-%ed%8a%b8%eb%a0%88%ec%9d%b4%eb%93%9c%ec%98%a4%ed%94%84">02. 설계 트레이드오프<span class="pilcrow">&nbsp;¶</span></a></h2>

<h3 id="캡슐화" class="anchor-link"><a href="#%ec%ba%a1%ec%8a%90%ed%99%94">캡슐화<span class="pilcrow">&nbsp;¶</span></a></h3>
<ul>
<li>외부에서 알 필요가 없는 부분을 감춤으로써 대상을 단순화 하는 추상화의 한 종류</li>
<li>객체지향 설계의 가장 중요한 원리는 불안정한 구현 세부사항을 안정적인 인터페이스 뒤로 캡슐화 하는 것</li>
</ul>
<blockquote>
<p>복잡성을 다루기 위한 가장 효과적인 도구는 추상화다. 다양한 추상화 유형을 사용할 수 있지만 객체지향 프로그래밍에서 복잡성을 취급하는 주요한 추상화 방법은 캡슐화다. 그러나 객체지향 언어를 사용한다해서 잘 캡슐화 된다는 보장은 없다.
객체지향 프로그래밍을 통해 전반적으로 얻을 수 있는 장점은 오직 설계 과정 동안 캡슐화를 목표로 인식할때만 달성될 수 있다.</p>
</blockquote>

<h3 id="응집도와-결합도" class="anchor-link"><a href="#%ec%9d%91%ec%a7%91%eb%8f%84%ec%99%80-%ea%b2%b0%ed%95%a9%eb%8f%84">응집도와 결합도<span class="pilcrow">&nbsp;¶</span></a></h3>
<p><strong>응집도</strong></p>
<p>모듈에 포함된 내부 요소들이 연관되어 있는 정도</p>
<p><strong>결합도</strong></p>
<p>의존성의 정도를 나타내며 다른 모듈에 대해 얼마나 많은 지식을 갖고 있는지를 나타내는 척도</p>
<p>높은 응집도와 낮은 결합도를 가진 설계를 추구해야하는 이유는  그것이 <strong>설계를 변경하기 쉽게 만들기 때문.</strong></p>
<p>응집도가 높은 설계에서는 하나의 요구사항을 변경하기 위해 하나의 모듈만 수정하면된다.</p>
<p>응집도가 낮은 설계에서는 하나의 요구사항을 변경하기 위해 여러 모듈을 동시에 수정해야한다.</p>
<p><!-- raw HTML omitted --></p>
<p>결합도는 <strong>한 모듈이 변경되기 위해서 다른 모듈의 변경을 요구하는 정도</strong></p>
<p><!-- raw HTML omitted --></p>

<h2 id="03-데이터-중심의-영화-예매-시스템의-문제점" class="anchor-link"><a href="#03-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a4%91%ec%8b%ac%ec%9d%98-%ec%98%81%ed%99%94-%ec%98%88%eb%a7%a4-%ec%8b%9c%ec%8a%a4%ed%85%9c%ec%9d%98-%eb%ac%b8%ec%a0%9c%ec%a0%90">03. 데이터 중심의 영화 예매 시스템의 문제점<span class="pilcrow">&nbsp;¶</span></a></h2>
<p>데이터 중심의 설계가 가진 대표적인 문제점</p>
<ul>
<li>캡슐화 위반</li>
<li>높은 결합도</li>
<li>낮은 응집도</li>
</ul>

<h3 id="캡슐화-위반" class="anchor-link"><a href="#%ec%ba%a1%ec%8a%90%ed%99%94-%ec%9c%84%eb%b0%98">캡슐화 위반<span class="pilcrow">&nbsp;¶</span></a></h3>
<p>앨런 홀럽 : 접근자와 수정자에 과도하게 의존하는 설계 방식을 추측에 의한 설계 전략이라 부른다.</p>
<p>get, set 메소드로 인해 movie 가 Money타입을 가지는 fee라는 인스턴스 변수가 존재하는 것을 인터페이스에서 노출.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Movie</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">private</span> Money fee<span style="color:#f92672">;</span>
<span style="color:#66d9ef">public</span> Money <span style="color:#a6e22e">getFee</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> fee<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setFee</span><span style="color:#f92672">(</span>Money fee<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">fee</span> <span style="color:#f92672">=</span> fee<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

</code></pre></div>
<h3 id="높은-결합도" class="anchor-link"><a href="#%eb%86%92%ec%9d%80-%ea%b2%b0%ed%95%a9%eb%8f%84">높은 결합도<span class="pilcrow">&nbsp;¶</span></a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReservationAgency</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> Reservation <span style="color:#a6e22e">reserve</span><span style="color:#f92672">(</span>Screening screening<span style="color:#f92672">,</span> Customer customer<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> audienceCount<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#f92672">...</span>
        Money fee<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>discountable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#f92672">...</span>
            fee <span style="color:#f92672">=</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">getFee</span><span style="color:#f92672">().</span><span style="color:#a6e22e">minus</span><span style="color:#f92672">(</span>discountAmount<span style="color:#f92672">).</span><span style="color:#a6e22e">times</span><span style="color:#f92672">(</span>audienceCount<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            fee <span style="color:#f92672">=</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">getFee</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
				<span style="color:#f92672">...</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

</code></pre></div><p><strong>너무 많은 대상에 의존하기에 변경에 취약한 ReservationAgency</strong></p>
<p><!-- raw HTML omitted --></p>

<h3 id="낮은-응집도" class="anchor-link"><a href="#%eb%82%ae%ec%9d%80-%ec%9d%91%ec%a7%91%eb%8f%84">낮은 응집도<span class="pilcrow">&nbsp;¶</span></a></h3>
<p>ReservationAgency 에  다음과 같은 수정사항이 발생할 경우 코드를 수정해야할 것</p>
<ul>
<li>할인 정책이 추가될 경우</li>
<li>할인 정책별로 할인 요금을 계산하는 방법이 변경될 경우</li>
<li>할인 조건이 추가되는 경우</li>
<li>할인 조건별로 할인 여부를 판단하는 방법이 변경될 경우</li>
<li>예매 요금을 계산하는 방법이 변경될 경우</li>
</ul>
<p><strong>낮은 응집도는 두가지 측면에서 설계에 문제를 일으킨다.</strong></p>
<ul>
<li>변경의 이유가 서로 다른 코드들을 하나의 모듈 안에 뭉쳐 놓았기 때문에 변경과 아무 상관이 없는 코드들이 영향을 받는다.</li>
<li>하나의 요구사항 변경을 반영하기 위해 동시에 여러 모듈을 수정해야 한다. 응집도가 낮을 경우 다른 모듈에 위치해야 할 책임의 일부가 엉뚱한 곳에 위치하기 때문이다.</li>
</ul>
<p><strong>단일 책임 원칙(Single Responsibility Principle, SRP)</strong></p>
<blockquote>
<p>로버트 마틴 , 클래스는 단 한가지의 변경 이유만 가져야 한다는 것이다.</p>
</blockquote>

<h2 id="04-자율적인-객체를-향해" class="anchor-link"><a href="#04-%ec%9e%90%ec%9c%a8%ec%a0%81%ec%9d%b8-%ea%b0%9d%ec%b2%b4%eb%a5%bc-%ed%96%a5%ed%95%b4">04. 자율적인 객체를 향해<span class="pilcrow">&nbsp;¶</span></a></h2>

<h3 id="캡슐화를-지켜라" class="anchor-link"><a href="#%ec%ba%a1%ec%8a%90%ed%99%94%eb%a5%bc-%ec%a7%80%ec%bc%9c%eb%9d%bc">캡슐화를 지켜라<span class="pilcrow">&nbsp;¶</span></a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AnyClass</span><span style="color:#f92672">{</span>
  <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">any</span><span style="color:#f92672">(</span>Rectangle rectangle<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> muliple<span style="color:#f92672">){</span>
    rectangle<span style="color:#f92672">.</span><span style="color:#a6e22e">setRight</span><span style="color:#f92672">(</span>rectangle<span style="color:#f92672">.</span><span style="color:#a6e22e">getRight</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> multiple<span style="color:#f92672">);</span>
    rectangle<span style="color:#f92672">.</span><span style="color:#a6e22e">setBottom</span><span style="color:#f92672">(</span>rectangle<span style="color:#f92672">.</span><span style="color:#a6e22e">getBottom</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> multiple<span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rectangle</span><span style="color:#f92672">{</span>
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">enlarge</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> multiple<span style="color:#f92672">){</span>
    right <span style="color:#f92672">*=</span> muliple<span style="color:#f92672">;</span>
    bottom <span style="color:#f92672">*=</span> multiple<span style="color:#f92672">;</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div>
<h3 id="스스로-자신의-데이터를-책임지는-객체" class="anchor-link"><a href="#%ec%8a%a4%ec%8a%a4%eb%a1%9c-%ec%9e%90%ec%8b%a0%ec%9d%98-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc-%ec%b1%85%ec%9e%84%ec%a7%80%eb%8a%94-%ea%b0%9d%ec%b2%b4">스스로 자신의 데이터를 책임지는 객체<span class="pilcrow">&nbsp;¶</span></a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Data</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DiscountCondition</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> DiscountConditionType type<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> sequence<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> DayOfWeek dayOfWeek<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> LocalTime startTime<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> LocalTime endTime<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DiscountCondition</span> <span style="color:#f92672">{</span>
<span style="color:#f92672">...</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isDiscountable</span><span style="color:#f92672">(</span>DayOfWeek dayOfWeek<span style="color:#f92672">,</span> LocalTime time <span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>type <span style="color:#f92672">!=</span> DiscountConditionType<span style="color:#f92672">.</span><span style="color:#a6e22e">PERIOD</span><span style="color:#f92672">){</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">dayOfWeek</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>dayOfWeek<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span>
                <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">startTime</span><span style="color:#f92672">.</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>time<span style="color:#f92672">)</span> <span style="color:#f92672">&lt;=</span>0 <span style="color:#f92672">&amp;&amp;</span>
                <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">endTime</span><span style="color:#f92672">.</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>time<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;=</span>0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isDiscountable</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> sequence<span style="color:#f92672">){</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>type <span style="color:#f92672">!=</span> DiscountConditionType<span style="color:#f92672">.</span><span style="color:#a6e22e">SEQUENCE</span><span style="color:#f92672">){</span>
            <span style="color:#66d9ef">throw</span>  <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">sequence</span> <span style="color:#f92672">==</span> sequence<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Movie</span><span style="color:#f92672">{</span>
  
    <span style="color:#66d9ef">public</span> Money <span style="color:#a6e22e">calculateAmountDiscountedFee</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>movieType <span style="color:#f92672">!=</span> MovieType<span style="color:#f92672">.</span><span style="color:#a6e22e">AMOUNT_DISCOUNT</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">(</span>
            <span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> fee<span style="color:#f92672">.</span><span style="color:#a6e22e">minus</span><span style="color:#f92672">(</span>discountAmount<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Money <span style="color:#a6e22e">calculatePercentDiscountedFee</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>movieType <span style="color:#f92672">!=</span> MovieType<span style="color:#f92672">.</span><span style="color:#a6e22e">PERCENT_DISCOUNT</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">(</span>
            <span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> fee<span style="color:#f92672">.</span><span style="color:#a6e22e">minus</span><span style="color:#f92672">(</span>fee<span style="color:#f92672">.</span><span style="color:#a6e22e">times</span><span style="color:#f92672">(</span>discountPercent<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Money <span style="color:#a6e22e">calculateNoneDiscountedFee</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>movieType <span style="color:#f92672">!=</span> MovieType<span style="color:#f92672">.</span><span style="color:#a6e22e">NONE_DISCOUNT</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">return</span> fee<span style="color:#f92672">;</span>

    <span style="color:#f92672">}</span>


    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isDiscountable</span><span style="color:#f92672">(</span>LocalDateTime whenScreend<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> sequence<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>DiscountCondition condition <span style="color:#f92672">:</span> discountConditions<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>condition<span style="color:#f92672">.</span><span style="color:#a6e22e">getType</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> DiscountConditionType<span style="color:#f92672">.</span><span style="color:#a6e22e">PERIOD</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> condition<span style="color:#f92672">.</span><span style="color:#a6e22e">isDiscountable</span><span style="color:#f92672">(</span>whenScreend<span style="color:#f92672">.</span><span style="color:#a6e22e">getDayOfWeek</span><span style="color:#f92672">(),</span> whenScreend<span style="color:#f92672">.</span><span style="color:#a6e22e">toLocalTime</span><span style="color:#f92672">());</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> condition<span style="color:#f92672">.</span><span style="color:#a6e22e">isDiscountable</span><span style="color:#f92672">(</span>sequence<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReservationAgency</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> Reservation <span style="color:#a6e22e">reserve</span><span style="color:#f92672">(</span>Screening screening<span style="color:#f92672">,</span> Customer customer<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> audienceCount<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Money fee <span style="color:#f92672">=</span> screening<span style="color:#f92672">.</span><span style="color:#a6e22e">calculateFee</span><span style="color:#f92672">(</span>audienceCount<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Reservation<span style="color:#f92672">(</span>customer<span style="color:#f92672">,</span> screening<span style="color:#f92672">,</span> fee<span style="color:#f92672">,</span> audienceCount<span style="color:#f92672">);</span>

    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>** 결합도 측면에서 이전보다 개선된 설계**</p>
<p><!-- raw HTML omitted --></p>

<h2 id="05-하지만-여전히-부족하다" class="anchor-link"><a href="#05-%ed%95%98%ec%a7%80%eb%a7%8c-%ec%97%ac%ec%a0%84%ed%9e%88-%eb%b6%80%ec%a1%b1%ed%95%98%eb%8b%a4">05. 하지만 여전히 부족하다<span class="pilcrow">&nbsp;¶</span></a></h2>

<h3 id="캡슐화-위반-1" class="anchor-link"><a href="#%ec%ba%a1%ec%8a%90%ed%99%94-%ec%9c%84%eb%b0%98-1">캡슐화 위반<span class="pilcrow">&nbsp;¶</span></a></h3>
<p>Movie 는 아래 세개 메서드를 통해 할인 정책에는 금액, 비율, 미적용 정책이 세가지 존재한다는 것을 노출한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Movie</span><span style="color:#f92672">{</span> 
    <span style="color:#66d9ef">public</span> Money <span style="color:#a6e22e">calculateAmountDiscountedFee</span><span style="color:#f92672">()</span> <span style="color:#f92672">{}</span>

    <span style="color:#66d9ef">public</span> Money <span style="color:#a6e22e">calculatePercentDiscountedFee</span><span style="color:#f92672">()</span> <span style="color:#f92672">{}</span>

    <span style="color:#66d9ef">public</span> Money <span style="color:#a6e22e">calculateNoneDiscountedFee</span><span style="color:#f92672">()</span> <span style="color:#f92672">{}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>캡슐화의 진정한 의미</strong></p>
<blockquote>
<p>캡슐화가 단순히 객체 내부의 데이터를 외부로부터 감추는 것 이상의 의미를  잘 보여준다. 사실 캡슐화는 변경될 수 있는 어떤 것이라도 감추는 것을 의미. 내부 속성을 외부로부터 감추는 것은 &lsquo;데이터 캡슐화&rsquo; 라는 캡슐화의 한 종류일 뿐.</p>
<p>캡슐화는 변하는 것 어떤 것이든 감추는 것이다. 그것이 무엇이든 구현과 관련된 것이라면..</p>
</blockquote>

<h3 id="높은-결합도-1" class="anchor-link"><a href="#%eb%86%92%ec%9d%80-%ea%b2%b0%ed%95%a9%eb%8f%84-1">높은 결합도<span class="pilcrow">&nbsp;¶</span></a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Movie</span><span style="color:#f92672">{</span>
  
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isDiscountable</span><span style="color:#f92672">(</span>LocalDateTime whenScreend<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> sequence<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>DiscountCondition condition <span style="color:#f92672">:</span> discountConditions<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>condition<span style="color:#f92672">.</span><span style="color:#a6e22e">getType</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> DiscountConditionType<span style="color:#f92672">.</span><span style="color:#a6e22e">PERIOD</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> condition<span style="color:#f92672">.</span><span style="color:#a6e22e">isDiscountable</span><span style="color:#f92672">(</span>whenScreend<span style="color:#f92672">.</span><span style="color:#a6e22e">getDayOfWeek</span><span style="color:#f92672">(),</span> whenScreend<span style="color:#f92672">.</span><span style="color:#a6e22e">toLocalTime</span><span style="color:#f92672">());</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> condition<span style="color:#f92672">.</span><span style="color:#a6e22e">isDiscountable</span><span style="color:#f92672">(</span>sequence<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>
<p>DiscountCondition의 기간 할인 조건의 명칭이 PERIOD에서 다른 값을 변경되면 Movie를 수정해야한다.</p>
</li>
<li>
<p>DiscountCondition의 종류가 추가되거나 삭제되면 if-else 구문을 수정해야한다.</p>
</li>
<li>
<p>DiscountCondition의 만족여부를 판단하는데 필요한 정보가 변경되면 Movie의 <code>isDiscountable</code> 메서드로 전달되는 파라미터를 변겨앻야한다.</p>
</li>
</ul>

<h3 id="낮은-응집도-1" class="anchor-link"><a href="#%eb%82%ae%ec%9d%80-%ec%9d%91%ec%a7%91%eb%8f%84-1">낮은 응집도<span class="pilcrow">&nbsp;¶</span></a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Screening</span><span style="color:#f92672">{</span>
  <span style="color:#66d9ef">public</span> Money <span style="color:#a6e22e">calculateFee</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> audienceCount<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>movie<span style="color:#f92672">.</span><span style="color:#a6e22e">getMovieType</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">case</span> AMOUNT_DISCOUNT<span style="color:#f92672">:</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>movie<span style="color:#f92672">.</span><span style="color:#a6e22e">isDiscountable</span><span style="color:#f92672">(</span>whenScreened<span style="color:#f92672">,</span> sequence<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">return</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">calculateAmountDiscountedFee</span><span style="color:#f92672">().</span><span style="color:#a6e22e">times</span><span style="color:#f92672">(</span>audienceCount<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">case</span> PERCENT_DISCOUNT<span style="color:#f92672">:</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>movie<span style="color:#f92672">.</span><span style="color:#a6e22e">isDiscountable</span><span style="color:#f92672">(</span>whenScreened<span style="color:#f92672">,</span> sequence<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">return</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">calculatePercentDiscountedFee</span><span style="color:#f92672">().</span><span style="color:#a6e22e">times</span><span style="color:#f92672">(</span>audienceCount<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>

            <span style="color:#66d9ef">case</span> NONE_DISCOUNT<span style="color:#f92672">:</span>
                <span style="color:#66d9ef">return</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">calculateNoneDiscountedFee</span><span style="color:#f92672">().</span><span style="color:#a6e22e">times</span><span style="color:#f92672">(</span>audienceCount<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> movie<span style="color:#f92672">.</span><span style="color:#a6e22e">calculateNoneDiscountedFee</span><span style="color:#f92672">().</span><span style="color:#a6e22e">times</span><span style="color:#f92672">(</span>audienceCount<span style="color:#f92672">);</span>
        
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>할인 조건을 변경하려면 DiscountCondition, Movie, Screening을 함께 수정해야한다.</p>

<h2 id="06-데이터-중심-설계의-문제점" class="anchor-link"><a href="#06-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a4%91%ec%8b%ac-%ec%84%a4%ea%b3%84%ec%9d%98-%eb%ac%b8%ec%a0%9c%ec%a0%90">06. 데이터 중심 설계의 문제점<span class="pilcrow">&nbsp;¶</span></a></h2>
<p>데이터 중심의 설계가 변경에 취약한 이유</p>
<ol>
<li>데이터 중심의 설계는 본질적으로 너무 이른 시기에 데이터에 관해 결정하도록 한다.</li>
<li>데이터 중심의 설계에서는 협력이라는 문맥을 고려하지 않고 객체를 고립시킨 채 오퍼레이션을 결정한다.</li>
</ol>

<h3 id="데이터-중심-설계는-객체의-행동보다는-상태에-초점을-맞춘다" class="anchor-link"><a href="#%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a4%91%ec%8b%ac-%ec%84%a4%ea%b3%84%eb%8a%94-%ea%b0%9d%ec%b2%b4%ec%9d%98-%ed%96%89%eb%8f%99%eb%b3%b4%eb%8b%a4%eb%8a%94-%ec%83%81%ed%83%9c%ec%97%90-%ec%b4%88%ec%a0%90%ec%9d%84-%eb%a7%9e%ec%b6%98%eb%8b%a4">데이터 중심 설계는 객체의 행동보다는 상태에 초점을 맞춘다.<span class="pilcrow">&nbsp;¶</span></a></h3>
<p>**데이터는 구현의 일부라는 사실을 명심하라. **</p>
<ul>
<li>데이터 중심설계에서 객체는 단순 데이터의 집합체일 뿐이다.</li>
</ul>
<p>너무 이른 시기에 데이터에 대해 고민하기 때문에 캡슐화에 실패하게 된다. 객체의 내부 구현이 객체의 인터페이스를 어지럽히고 객체의 응집도와 결합도에 나쁜 영향을 미치기 때문에 변경에 취약한 코드를 낳게 된다.</p>

<h3 id="데이터-중심-설계는-객체를-고립시킨-채-오퍼레이션을-정의하도록-만든다" class="anchor-link"><a href="#%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a4%91%ec%8b%ac-%ec%84%a4%ea%b3%84%eb%8a%94-%ea%b0%9d%ec%b2%b4%eb%a5%bc-%ea%b3%a0%eb%a6%bd%ec%8b%9c%ed%82%a8-%ec%b1%84-%ec%98%a4%ed%8d%bc%eb%a0%88%ec%9d%b4%ec%85%98%ec%9d%84-%ec%a0%95%ec%9d%98%ed%95%98%eb%8f%84%eb%a1%9d-%eb%a7%8c%eb%93%a0%eb%8b%a4">데이터 중심 설계는 객체를 고립시킨 채 오퍼레이션을 정의하도록 만든다.<span class="pilcrow">&nbsp;¶</span></a></h3>
<p>객체지향 설계의 무게 중심은 내부 객체가 아닌 외부에 맞춰져 있어야한다.  중요한 점은 객체가 다른 객체와 협력하는 방법이다.</p>
<p>데이터 중심 설계의 초점은 객체의 내부가 아닌 내부에 있다. 실행 문맥에 대한 깊이 있는 고민 없이 객체가 관리할 데이터의 세부 정보를 먼저 결정한다.</p>
<p>객체의 인터페이스에 구현이 노출돼 있었기 때문에 협력이 구현 세부사항에 종속돼 있고 그에 따라 객체의 내부 구현이 변경될때 협력하는 객체 모두가 영향을 받을수 밖에 없었던 것이다.</p>
<p>cd</p>

    </article>
</div>
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "XYW" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        
<nav role="navigation" class="flex-container bottom-menu">
    
<hr />
<p>


    
        <a href="/posts">back</a>
        
            &#183;
        
    

    
        
            <a href="/posts">posts</a>
        
    
    
        
            &#183; 
            <a href="/gallery">gallery</a>
        
            &#183; 
            <a href="/portfolio">portfolio</a>
        
            &#183; 
            <a href="/about">who is stones?</a>
        
    
    &#183; 
    <a href="/">
        main
    </a>

</p>
</nav>

    </main>
    
    <footer class="flex-container footer">
</footer>
    
    
</body>

</html>