<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<meta name="description" content="A new Hugo site.">
<title>
    [deview] 네이버 모델서빙 - Call me Sam
</title>


<link rel="shortcut icon" href="/sam.ico">








<link rel="stylesheet" href="/css/main.min.c5514d3530979d291f3497facc20da1cec870028dbc2a3630b64bab8721bbe49.css" integrity="sha256-xVFNNTCXnSkfNJf6zCDaHOyHACjbwqNjC2S6uHIbvkk=" crossorigin="anonymous" media="screen">




  






<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://example.com/tn.png"/>

<meta name="twitter:title" content="[deview] 네이버 모델서빙"/>
<meta name="twitter:description" content="목차&nbsp;¶ 1. 모델서빙 공통화 동기&nbsp;¶  모델 수의 증가 지속적인 모델 학습과 배포  지속적으로 학습을 하면 배포가 필요한데 모델 배포한후 모델에 대한 a/b 테스트 로그로 인한 학습이 필요 서빙에서 가능한 부분은 작업   커스텀한 사내 시스템 연동  사내플랫폼 시스템이 다양하기에 불필요한 코드가 중복되지 않도록 정리   협업 가능한 환경 구축 (모델러 / 엔지니어)  모델이 늘어날수록 엔지니어가 작업할 내용이 많아짐      gateway - 인증, 로깅, 웨이트"/>

<meta property="og:title" content="[deview] 네이버 모델서빙" />
<meta property="og:description" content="목차&nbsp;¶ 1. 모델서빙 공통화 동기&nbsp;¶  모델 수의 증가 지속적인 모델 학습과 배포  지속적으로 학습을 하면 배포가 필요한데 모델 배포한후 모델에 대한 a/b 테스트 로그로 인한 학습이 필요 서빙에서 가능한 부분은 작업   커스텀한 사내 시스템 연동  사내플랫폼 시스템이 다양하기에 불필요한 코드가 중복되지 않도록 정리   협업 가능한 환경 구축 (모델러 / 엔지니어)  모델이 늘어날수록 엔지니어가 작업할 내용이 많아짐      gateway - 인증, 로깅, 웨이트" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/posts/%E1%84%82%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%87%E1%85%A5-%E1%84%86%E1%85%A9%E1%84%83%E1%85%A6%E1%86%AF%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%86%BC-api/" />
<meta property="og:image" content="https://example.com/tn.png"/>
<meta property="article:published_time" content="2020-11-30T10:57:53+00:00" />
<meta property="article:modified_time" content="2020-11-30T10:57:53+00:00" /><meta property="og:site_name" content="Call me Sam" />


    

    
    
    
    <title>
        
        [deview] 네이버 모델서빙
        
    </title>
</head>

<body>
    
    
    <header class="wrap flex-container">
        <h1>[deview] 네이버 모델서빙</h1>
    </header>
    
    <main class="wrap">
        
<div class="flex-container">
    <aside role="complementary">
        Mon Nov 30, 2020 &#183; 243 words
        <div class="tag-container">
            
            
            <span class="tag">
                <a href="/tags/deview/">
                    deview
                </a>
            </span>
            
            
            
            <span class="tag">
                <a href="/tags/ml/">
                    ML
                </a>
            </span>
            
            
        </div>
    </aside>
    <hr />
    <article role="article">
        
<h4 id="목차" class="anchor-link"><a href="#%eb%aa%a9%ec%b0%a8">목차<span class="pilcrow">&nbsp;¶</span></a></h4>

<h5 id="1-모델서빙-공통화-동기" class="anchor-link"><a href="#1-%eb%aa%a8%eb%8d%b8%ec%84%9c%eb%b9%99-%ea%b3%b5%ed%86%b5%ed%99%94-%eb%8f%99%ea%b8%b0">1. 모델서빙 공통화 동기<span class="pilcrow">&nbsp;¶</span></a></h5>
<ul>
<li>모델 수의 증가</li>
<li>지속적인 모델 학습과 배포
<ul>
<li>지속적으로 학습을 하면 배포가 필요한데 모델 배포한후 모델에 대한 a/b 테스트</li>
<li>로그로 인한 학습이 필요</li>
<li>서빙에서 가능한 부분은 작업</li>
</ul>
</li>
<li>커스텀한 사내 시스템 연동
<ul>
<li>사내플랫폼 시스템이 다양하기에</li>
<li>불필요한 코드가 중복되지 않도록 정리</li>
</ul>
</li>
<li>협업 가능한 환경 구축 (모델러 / 엔지니어)
<ul>
<li>모델이 늘어날수록 엔지니어가 작업할 내용이 많아짐</li>
</ul>
</li>
</ul>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125135008717.png" alt="image-20201125135008717"  />
</p>
</p>
<ul>
<li>
<p>gateway - 인증, 로깅, 웨이트</p>
</li>
<li>
<p>model sdk</p>
<ul>
<li>모델러와 협업할수 있는 인터페이스 제공 /GPC 등에 업로드할 수 있는</li>
<li>모델 디스커버리, 로깅, 헬스체크, 게이트웨이와 연동되는 로직을 넣음</li>
</ul>
</li>
<li>
<p>deploy - 모델의 디플로이를 맡음</p>
<ul>
<li>이종 시스템이 많아 디플로이먼트가 인터페이스를 제공하여 단일한 인터페이스를 제공함</li>
</ul>
</li>
</ul>

<h5 id="2-mds-공통-모델-패키징---김병훈" class="anchor-link"><a href="#2-mds-%ea%b3%b5%ed%86%b5-%eb%aa%a8%eb%8d%b8-%ed%8c%a8%ed%82%a4%ec%a7%95---%ea%b9%80%eb%b3%91%ed%9b%88">2. MDS: 공통 모델 패키징 - 김병훈<span class="pilcrow">&nbsp;¶</span></a></h5>

<h3 id="서빙-환경-및-요구사항" class="anchor-link"><a href="#%ec%84%9c%eb%b9%99-%ed%99%98%ea%b2%bd-%eb%b0%8f-%ec%9a%94%ea%b5%ac%ec%82%ac%ed%95%ad">서빙 환경 및 요구사항<span class="pilcrow">&nbsp;¶</span></a></h3>
<ul>
<li>다양한 ML 프레임워크 - 텐서플로우
<ul>
<li>Base 이미지 프레임워크 별로</li>
</ul>
</li>
<li>REST API 로 서비스 제공
<ul>
<li>Decorator /Flask</li>
</ul>
</li>
<li>GPU - 고성능
<ul>
<li>오퍼레이터 / 배치 처리. 기능</li>
</ul>
</li>
<li>Docker - 종속성 배포 문제 해결을 위해 사용
<ul>
<li>배포는 Docker</li>
</ul>
</li>
</ul>

<h3 id="일반적인-인퍼런스-요청-처리-순서" class="anchor-link"><a href="#%ec%9d%bc%eb%b0%98%ec%a0%81%ec%9d%b8-%ec%9d%b8%ed%8d%bc%eb%9f%b0%ec%8a%a4-%ec%9a%94%ec%b2%ad-%ec%b2%98%eb%a6%ac-%ec%88%9c%ec%84%9c">일반적인 인퍼런스 요청 처리 순서<span class="pilcrow">&nbsp;¶</span></a></h3>
<p>![image-20201125135517498](/Users/stones/Library/Application Support/typora-user-images/image-20201125135517498.png)</p>
<ul>
<li>요청 -&gt; 전처리 -&gt; 인퍼런스 -&gt; 후처리 -&gt; 응답</li>
</ul>

<h3 id="서빙-핸들러-구현" class="anchor-link"><a href="#%ec%84%9c%eb%b9%99-%ed%95%b8%eb%93%a4%eb%9f%ac-%ea%b5%ac%ed%98%84">서빙 핸들러 구현<span class="pilcrow">&nbsp;¶</span></a></h3>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125135558960.png" alt="image-20201125135558960"  />
</p>
</p>

<h3 id="패키지-생성-및-서빙" class="anchor-link"><a href="#%ed%8c%a8%ed%82%a4%ec%a7%80-%ec%83%9d%ec%84%b1-%eb%b0%8f-%ec%84%9c%eb%b9%99">패키지 생성 및 서빙<span class="pilcrow">&nbsp;¶</span></a></h3>
<p>![image-20201125135707546](/Users/stones/Library/Application Support/typora-user-images/image-20201125135707546.png)</p>

<h3 id="배치-인퍼런스" class="anchor-link"><a href="#%eb%b0%b0%ec%b9%98-%ec%9d%b8%ed%8d%bc%eb%9f%b0%ec%8a%a4">배치 인퍼런스<span class="pilcrow">&nbsp;¶</span></a></h3>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125135736125.png" alt="image-20201125135736125"  />
</p>
</p>

<h3 id="멀티-모델-파이프라인" class="anchor-link"><a href="#%eb%a9%80%ed%8b%b0-%eb%aa%a8%eb%8d%b8-%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8">멀티 모델 파이프라인<span class="pilcrow">&nbsp;¶</span></a></h3>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125135800752.png" alt="image-20201125135800752"  />
</p>
</p>

<h5 id="3-dplo-공통-모델-배포" class="anchor-link"><a href="#3-dplo-%ea%b3%b5%ed%86%b5-%eb%aa%a8%eb%8d%b8-%eb%b0%b0%ed%8f%ac">3. DPLO: 공통 모델 배포<span class="pilcrow">&nbsp;¶</span></a></h5>

<h3 id="모델-배포-서버-요구-및-구현" class="anchor-link"><a href="#%eb%aa%a8%eb%8d%b8-%eb%b0%b0%ed%8f%ac-%ec%84%9c%eb%b2%84-%ec%9a%94%ea%b5%ac-%eb%b0%8f-%ea%b5%ac%ed%98%84">모델 배포 서버 요구 및 구현<span class="pilcrow">&nbsp;¶</span></a></h3>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125135916285.png" alt="image-20201125135916285"  />
</p>
</p>

<h3 id="배포-과정" class="anchor-link"><a href="#%eb%b0%b0%ed%8f%ac-%ea%b3%bc%ec%a0%95">배포 과정<span class="pilcrow">&nbsp;¶</span></a></h3>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125135938081.png" alt="image-20201125135938081"  />
</p>
</p>

<h3 id="배포-오퍼레이터" class="anchor-link"><a href="#%eb%b0%b0%ed%8f%ac-%ec%98%a4%ed%8d%bc%eb%a0%88%ec%9d%b4%ed%84%b0">배포 오퍼레이터<span class="pilcrow">&nbsp;¶</span></a></h3>

<h3 id="배포-요청-scheme" class="anchor-link"><a href="#%eb%b0%b0%ed%8f%ac-%ec%9a%94%ec%b2%ad-scheme">배포 요청 Scheme<span class="pilcrow">&nbsp;¶</span></a></h3>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125140140264.png" alt="image-20201125140140264"  />
</p>
</p>

<h3 id="선언-파일을-통한-배포" class="anchor-link"><a href="#%ec%84%a0%ec%96%b8-%ed%8c%8c%ec%9d%bc%ec%9d%84-%ed%86%b5%ed%95%9c-%eb%b0%b0%ed%8f%ac">선언 파일을 통한 배포<span class="pilcrow">&nbsp;¶</span></a></h3>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125140234170.png" alt="image-20201125140234170"  />
</p>
</p>

<h3 id="동적-endpoint-discovery" class="anchor-link"><a href="#%eb%8f%99%ec%a0%81-endpoint-discovery">동적 Endpoint Discovery<span class="pilcrow">&nbsp;¶</span></a></h3>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125140331854.png" alt="image-20201125140331854"  />
</p>
</p>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125140453940.png" alt="image-20201125140453940"  />
</p>
</p>

<h5 id="4-aigw-공통-모델-라우팅" class="anchor-link"><a href="#4-aigw-%ea%b3%b5%ed%86%b5-%eb%aa%a8%eb%8d%b8-%eb%9d%bc%ec%9a%b0%ed%8c%85">4. AIGW: 공통 모델 라우팅<span class="pilcrow">&nbsp;¶</span></a></h5>
<ul>
<li>
<p>라우팅 환경 및 요구사항</p>
</li>
<li>
<p>라우팅 Scheme 및 로드 밸런싱 방식</p>
</li>
</ul>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125140526109.png" alt="image-20201125140526109"  />
</p>
</p>
<ul>
<li>
<p>동적 URL 매칭 라우터</p>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125140659278.png" alt="image-20201125140659278"  />
</p>
</p>
</li>
<li>
<p>요청 미러링 기능</p>
</li>
</ul>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125140714885.png" alt="image-20201125140714885"  />
</p>
</p>
<ul>
<li>가중치 기반 라우팅</li>
</ul>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125140808348.png" alt="image-20201125140808348"  />
</p>
</p>
<ul>
<li>모델 로그 유통 및 관리</li>
</ul>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125140920393.png" alt="image-20201125140920393"  />
</p>
</p>
<ul>
<li>로그 시각화</li>
</ul>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125141013780.png" alt="image-20201125141013780"  />
</p>
</p>
<ul>
<li>모델 서빙 모니터링</li>
</ul>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125141000187.png" alt="image-20201125141000187"  />
</p>
</p>

<h5 id="5-recap--conclusion---서동필" class="anchor-link"><a href="#5-recap--conclusion---%ec%84%9c%eb%8f%99%ed%95%84">5. Recap &amp; Conclusion - 서동필<span class="pilcrow">&nbsp;¶</span></a></h5>
<ul>
<li>더 편리하고 효과적인 모델 서빙/운영 경험 제공</li>
</ul>
<p><p style="text-align:center;">
    <img src="/Users/stones/git/dsChoi.github.io/source/image-20201125141105831.png" alt="image-20201125141105831"  />
</p>
</p>

    </article>
</div>


        
<nav role="navigation" class="flex-container bottom-menu">
    
<hr />
<p>


    
        <a href="/posts">back</a>
        
            &#183;
        
    

    
        
            <a href="/posts">posts</a>
        
    
    
        
            &#183; 
            <a href="/gallery">gallery</a>
        
            &#183; 
            <a href="/portfolio">portfolio</a>
        
            &#183; 
            <a href="/about">who is stones?</a>
        
    
    &#183; 
    <a href="/">
        main
    </a>

</p>
</nav>

    </main>
    
    <footer class="flex-container footer">
</footer>
    
    
</body>

</html>